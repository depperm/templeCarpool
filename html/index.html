<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Temple Carpool</title>
        <link rel="icon" href="../images/templecarpoolLogo.png" sizes="400x400">
        <meta charset="utf-8">
        <meta name="google-signin-scope" content="profile email">
        <meta name="google-signin-client_id" content="312484233782-6q2cd48kt6ptu0tlcs5mv59vk1n9q9hp.apps.googleusercontent.com">
        <script src="../scripts/sortTable.js"></script>
        <script src="https://apis.google.com/js/platform.js" async defer></script>
        <link rel="stylesheet" href="../styles/mystyle.css">
    </head>
    <body>
        <div class="g-signin2" data-onsuccess="onSignIn" data-theme="light"></div>
        <script>
            function onSignIn(googleUser) {
                var profile=googleUser.getBasicProfile();
                console.log("ID: "+profile.getId());
                console.log("Full Name: "+profile.getName());
                console.log("Email: "+profile.getEmail());
                var id_token=googleUser.getAuthResponse().id_token;
                console.log("ID token: "+id_token);
                xhr = new XMLHttpRequest();
                xhr.open('POST', 'https://templecarpool.com/tokensignin');
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xhr.onload=function(){
                    console.log('Signed in as: '+xhr.responseText);
                };
                xhr.send('idtoken='+id_token);
            };
        </script>
        <div id="content" hidden>
            <table id="trips">
                <tr class="header">
                    <th>Departure</th>
                    <th>Return</th>
                    <th>Seats</th>
                    <th>Driver</th>
                </tr>
            </table>
        </div>
    </body>
</html>
